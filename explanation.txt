  I used the paramiko server interface to handle the ssh exchange between the client and the server. My files include the host key for this server. I kept a record of how many attempts each user made to gain to access to the ssh server. If that number exceeded 5 then I granted them access. I created a shell class with methods to execute certain commands. This class also maintained a file tree, which was used by the various commands. Once the user was given access they could interact with an instance of this shell class. If they entered 'exit' or timed-out their connection would be closed.
